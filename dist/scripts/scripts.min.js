let pokemonRepository=(()=>{let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150",n=document.getElementById("exampleModal"),o=!1,i=[];function r(t){if("object"==typeof t){let n=Object.keys(t);n.includes("name")&&n.includes("detailsUrl")?e.push(t):alert("Incorrect JSON keys")}else alert("All items in pokemonRepository must be objects!")}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){let t=document.querySelector(".list-group"),n=document.createElement("li");n.classList.add("list-group-item","col-md-4","col-12");let o=document.createElement("button");var i,r;o.innerText=l(e.name),o.classList.add("btn","pokebtn"),o.setAttribute("type","button"),o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#exampleModal"),n.appendChild(o),t.appendChild(n),i=p,r=e,o.addEventListener("click",()=>i(r))}function p(e){s(e).then(()=>{i=[];let t=document.querySelector(".modal-body");t.innerHTML="",document.querySelector(".modal-title").innerHTML=l(e.name);let n=document.createElement("p");n.innerText=`Pokemon Height: ${e.height} meters`;let o=document.createElement("p");o.innerText=`Pokemon Weight: ${e.weight} hectograms`;let r=document.createElement("ul");r.classList.add("poketype"),r.innerText="Pokemon Type:",e.types.forEach(e=>{let t=e.type.name,n=document.createElement("li");r.appendChild(n),n.innerText+=l(t)});let a=document.createElement("img");a.setAttribute("src",e.imageUrl),t.appendChild(n),t.appendChild(o),t.appendChild(r),t.appendChild(a),i.push(e)})}function s(e){let t=e.detailsUrl;return fetch(t).then(e=>e.json()).then(t=>{e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types}).catch(e=>console.log(e))}return n.addEventListener("pointerdown",function(e){o=!0;let t=e.pageX,n=e.pageY;i.push(t),i.push(n)}),n.addEventListener("pointermove",function(t){if(!o)return;let n=t.pageX,r=t.pageY,l=n-i[1],a=r-i[2],s=e.indexOf(i[0]);Math.abs(l)>Math.abs(a)&&(l>0?p(0==s?e[s]:e[s-1]):s==e.length-1?p(e[s]):p(e[s+1]))}),n.addEventListener("pointerup",function(){o=!1}),{loadApiList:function(){return fetch(t).then(e=>e.json()).then(e=>{e.results.forEach(e=>{r({name:e.name,detailsUrl:e.url})})}).catch(e=>console.error(e))},loadApiDetails:s,addToPokemonArray:r,getPokemonArray:function(){return e},pokemonLookup:function(t){document.querySelector(".list-group").innerHTML="",e.filter(e=>{e.name.includes(t)&&a(e)})},htmlList:a}})();pokemonRepository.loadApiList().then(()=>{pokemonRepository.getPokemonArray().forEach(e=>pokemonRepository.htmlList(e))});let searchInput=document.getElementById("searchInput");searchInput.addEventListener("input",()=>{pokemonRepository.pokemonLookup(searchInput.value)});